@using OutWeb.Models.FrontEnd.SearchSiteModels
@using OutWeb.Service
@model SearchListViewModel
@{
    ViewBag.Title = "全文檢索";
    ViewBag.Breadcrumb = "全文檢索"; @* 最後層的麵包屑 *@
}


@using (Html.BeginForm("Search", "Search", FormMethod.Get, new { id = "frmSearch" }))
{
    <section class="wrap">
        <header class="mb-12 text-left">
            搜尋關鍵字: "<span class="text-danger">@Model.Filter.QueryString</span>", 約有 <span class="text-secondary">@string.Format("{0:0,0}", Model.Result.Data.Count)</span> 項目結果。
        </header>

        @* 1頁30筆 - 依更新時間排序(時間最新優先) *@
        <main class="text-left mb-32">
            @foreach (var data in Model.Result.Data)
            {
                <article class="text-list">
                    <a href="@data.LinkAddr" class="hover-secondary">@data.Title</a>
                    @if (!string.IsNullOrEmpty(data.Content))
                    {
                        <p>@Html.FormatHtmlString(data.Content)</p>
                    }
                </article>
            }


            @*<article class="text-list">
                    <a href="" class="hover-secondary">這裡是標題這裡是標題這裡是標題</a>
                    <p>內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容</p>
                </article>

                <article class="text-list">
                    <a href="" class="hover-secondary">這裡是標題這裡是標題這裡是標題</a>
                    最多顯示100字
                    <p>內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容...</p>
                </article>

                <article class="text-list">
                    <a href="" class="hover-secondary">這裡是標題這裡是標題這裡是標題</a>
                    <p>內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容</p>
                </article>

                <article class="text-list">
                    <a href="" class="hover-secondary">這裡是標題這裡是標題這裡是標題</a>
                    <p>內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容</p>
                </article>*@
        </main>

        @*<nav class="pager text-info">
                <span class="pull-left">
                    1/76頁　755筆
                </span>

                <a href="~/Train/List" class="btn ti-angle-double-left"><i class="sr-only">最前一筆</i></a>
                <a href="~/Train/List" class="btn ti-angle-left"><i class="sr-only">上一筆</i></a>
                <a href="~/Train/List" class="btn ti-angle-right"><i class="sr-only">下一筆</i></a>
                <a href="~/Train/List" class="btn ti-angle-double-right"><i class="sr-only">最後一筆</i></a>

                <label for="numPage" class="ml-16">
                    第
                    <input id="numPage" class="form-element inline text-center" type="number" min="1" value="1">
                    頁
                </label>
            </nav>*@


        <nav class="pager text-info">
            @{
                int beginCount = Model.Result.Pagination.CurrentPage > 1 ? ((Model.Result.Pagination.CurrentPage - 1) * Model.Result.Pagination.PageSize) + 1 : 1;
                int lastCount =
                    Model.Result.Data.Count >= Model.Result.Pagination.PageSize ?
                    ((Model.Result.Pagination.CurrentPage) * Model.Result.Pagination.PageSize) : Model.Result.Pagination.DataCount;
                string disabledPre = Model.Result.Pagination.CurrentPage == 1 ? "disabled" : "";
                string disabledNext = Model.Result.Pagination.CurrentPage == Model.Result.Pagination.LastPage ? "disabled" : "";
                string disabledPageInput = Model.Result.Pagination.LastPage == 1 ? "disabled" : "";
                string pageTotalInfo = string.Format("{0}/{1}頁 {2}筆", Model.Result.Pagination.CurrentPage, Model.Result.Pagination.LastPage, Model.Result.Pagination.DataCount);
            }
            <span class="pull-left">
                @pageTotalInfo
            </span>

            <a @disabledPre href="javascript:;"
               onclick="location.href='@Url.Action("Index", "Search", new { page = Model.Result.Pagination.FirstPage })'"
               class="btn ti-angle-double-left"><i class="sr-only">最前一筆</i></a>
            <a @disabledPre href="javascript:;"
               onclick="location.href='@Url.Action("Index", "Search", new { page = Model.Result.Pagination.PrePage })'"
               class="btn ti-angle-left"><i class="sr-only">上一筆</i></a>
            <a @disabledNext href="javascript:;"
               onclick="location.href='@Url.Action("Index", "Search", new { page = Model.Result.Pagination.NextPage })'"
               class="btn ti-angle-right"><i class="sr-only">下一筆</i></a>
            <a @disabledNext href="javascript:;"
               onclick="location.href='@Url.Action("Index", "Search", new { page = Model.Result.Pagination.LastPage })'"
               class="btn ti-angle-double-right"><i class="sr-only">最後一筆</i></a>

            <label for="numPage" class="ml-16">
                第
                <input @disabledPageInput id="numPage" name="page" class="form-element inline text-center" type="number" min="1" value="@Model.Result.Pagination.CurrentPage">
                頁
            </label>
        </nav>













    </section>
                }